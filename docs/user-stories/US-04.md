# US-04: Spherical Wrapping

## User Story
As a NASA Operator,
I want the rover to wrap around the grid when it reaches the edge,
So that I can explore the entire spherical surface of Mars.

## Description
The grid represents a sphere mapped to a 2D plane.
- **Horizontal Wrapping (X-axis)**: Connected like a cylinder.
    - Moving East at (MAX_X, y) -> (0, y)
    - Moving West at (0, y) -> (MAX_X, y)
- **Vertical Wrapping (Y-axis)**: Connected via the poles, shifting to the opposite meridian.
    - Moving North at (x, MAX_Y) -> (x + MAX_X/2, MAX_Y) with orientation inverted (N -> S).
        - Wait, standard spherical wrapping usually means crossing the pole goes to the "back" side.
        - If grid width is 10 (0..9), "opposite side" of x=0 is x=5.
        - Logic: New X = (x + Width/2) % Width.
        - Orientation changes 180 degrees (e.g., N -> S).
    - Moving South at (x, 0) -> (x + Width/2, 0) with orientation inverted (S -> N).

## Acceptance Criteria

### Scenario 1: Horizontal Wrapping East
```gherkin
Given a grid of size 10x10
And a rover at (9, 5) facing 'E'
When I execute command 'f'
Then the rover should be at (0, 5)
And the rover should be facing 'East'
```

### Scenario 2: Horizontal Wrapping West
```gherkin
Given a grid of size 10x10
And a rover at (0, 5) facing 'W'
When I execute command 'f'
Then the rover should be at (9, 5)
And the rover should be facing 'West'
```

### Scenario 3: Vertical Wrapping North (Crossing the Pole)
```gherkin
Given a grid of size 10x10
And a rover at (0, 9) facing 'N'
When I execute command 'f'
Then the rover should be at (5, 9)
And the rover should be facing 'South'
```

### Scenario 4: Vertical Wrapping South (Crossing the Pole)
```gherkin
Given a grid of size 10x10
And a rover at (5, 0) facing 'S'
When I execute command 'f'
Then the rover should be at (0, 0)
And the rover should be facing 'North'
```

## Test Reference
- [RoverWrappingTest.kt](file:///Users/ivangomezrodriguez/Dev/EXPERIMENTS/mars-anitgravity-rover/src/test/kotlin/com/example/marsrover/RoverWrappingTest.kt)
